!function(root,factory){"function"==typeof define&&define.amd?define(["jquery"],factory):"object"==typeof exports?module.exports=factory(require("jquery")):root.simpla=factory(jQuery)}(window,function($){"use strict";function getCoords(el){var top,left,docEl=document.documentElement,body=document.body,coords=el.getBoundingClientRect();return top=coords.top+(window.pageYOffset||docEl.scrollTop||body.scrollTop||0),left=coords.left+(window.pageXOffset||docEl.scrollLeft||body.scrollLeft||0),top+=docEl.clientTop||body.clientTop||0,left+=docEl.clientLeft||body.clientLeft||0,{top:top,left:left}}var simpla={toString:function(){return"[object Simpla]"}};return simpla.globals={},simpla.storage={},simpla.storage.dropdowns=[],simpla.storage.bundles=[],simpla.storage.spinners=[],simpla.storage.staticTabs=[],simpla.storage.adaptiveTabs=[],simpla.storage.searches=[],simpla.storage.cache={},simpla.helpers={},simpla.helpers.getClass=function(arg){return Object.prototype.toString.call(arg).slice(8,-1)},simpla.helpers.inArray=function(arr,value){return arr.some(function(item,i){return item===value})},simpla.helpers.removeFromArray=function(arr,value){for(var i=0;i<arr.length;i++)arr[i]===value&&(arr.splice(i,1),i--)},simpla.helpers.pushIfMiss=function(arr,value){return simpla.helpers.inArray(arr,value)||arr.push(value),arr},simpla.helpers.isNumeric=function(n){return!isNaN(parseFloat(n))&&isFinite(n)},simpla.helpers.extend=function(copy,dest){var key;dest=dest||{};for(key in copy)dest[key]=copy[key];return dest},simpla.helpers.createMap=function(){return Object.create(null)},simpla.helpers.addLeadingZero=function(n){return n<10?"0"+n:n},simpla.helpers.getAbsoluteUrl=function(){var a;return function(url){return a||(a=document.createElement("a")),a.href=url||"",a.href}}(),simpla.styles={},simpla.styles.support={},simpla.styles.support.animation=function(){var i,domPrefixes="Webkit Moz O ms Khtml".split(" "),el=document.createElement("div");if(void 0!==el.style.animationName)return!0;for(i=0;i<domPrefixes.length;i+=1)if(void 0!==el.style[domPrefixes[i]+"AnimationName"])return!0;return!1}(),simpla.styles.rippleButton=function(){var timerID;return function(e){var btn,circle,coords,size,xPos,yPos,action,percent,btnColor,bg;simpla.styles.support.animation&&(btn=this,circle=btn.querySelector(".circle"),coords=getCoords(btn),size=Math.max(btn.clientWidth,btn.clientHeight),xPos=e.pageX-coords.left,yPos=e.pageY-coords.top,action=btn.dataset.colorAction,percent=btn.dataset.percent,btnColor=getComputedStyle(btn).backgroundColor,bg=simpla.colors[action](btnColor,percent),circle&&(btn.removeChild(circle),circle=null),circle=document.createElement("div"),circle.style.width=size+"px",circle.style.height=size+"px",circle.style.top=yPos-size/2+"px",circle.style.left=xPos-size/2+"px",circle.style.backgroundColor=bg,circle.className="circle",btn.appendChild(circle),timerID&&clearTimeout(timerID),timerID=setTimeout(function(){btn.removeChild(circle)},600))}}(),simpla.colors={},simpla.colors.lighten=function(color,percent){var parts=color.replace(/rgba?\(/,"").replace(/\)/,"").split(","),red=parseInt(parts[0],10),green=parseInt(parts[1],10),blue=parseInt(parts[2],10),newColor="rgb(";return percent/=100,newColor+=Math.round((255-red)*percent)+red+",",newColor+=Math.round((255-green)*percent)+green+",",newColor+=Math.round((255-blue)*percent)+blue+")"},simpla.colors.darken=function(color,percent){var parts=color.replace(/rgba?\(/,"").replace(/\)/,"").split(","),red=parseInt(parts[0],10),green=parseInt(parts[1],10),blue=parseInt(parts[2],10),newColor="rgb(";return percent/=100,newColor+=Math.round((0-red)*percent)+red+",",newColor+=Math.round((0-green)*percent)+green+",",newColor+=Math.round((0-blue)*percent)+blue+")"},simpla.decorators={},simpla.decorators.debounce=function(func,delay){var state=null,COOLDOWN=1;return function(){var result;if(!state)return result=func.apply(this,arguments),state=COOLDOWN,setTimeout(function(){state=null},delay||100),result}},simpla.decorators.throttle=function(func,delay){var lastArgs,lastContext,state=null,COOLDOWN=1;return function wrapper(){var result;return state?(lastArgs=arguments,void(lastContext=this)):(result=func.apply(this,arguments),state=COOLDOWN,setTimeout(function(){state=null,lastArgs&&(wrapper.apply(lastContext,lastArgs),lastContext=lastArgs=null)},delay||100),result)}},simpla.decorators.smartDraw=function(func,delay,execAsap){var timerID;return function(){var context=this,args=arguments;timerID?clearTimeout(timerID):execAsap&&func.apply(context,args),timerID=setTimeout(function(){execAsap||func.apply(context,args),timerID=null},delay||100)}},simpla.decorators.once=function(func,context){var isCalled=!1;return function(){var result;return isCalled?null:(result=func.apply(context,arguments),isCalled=!0,result)}},simpla.form={},simpla.form.isPattern=function(pattern,str){return str.length&&pattern.length?new RegExp(pattern,"g").test(str):null},simpla.form.isEmail=function(str){return simpla.form.isPattern("^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+(.[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$",str.toLowerCase())},simpla.form.setValid=function(el,showNotice,id){el.addClass("js-input--valid").removeClass("js-input--invalid"),showNotice&&simpla.DOM.hideNotice($("#"+id))},simpla.form.setInvalid=function(el,e,noticeID,options){el.addClass("js-input--invalid").removeClass("js-input--valid"),e.preventDefault(),options.scrollToInvalid&&firstInvalidField&&simpla.DOM.scrollBody(firstInvalidField,options.scrollCorrection,{}),options.showNotice&&simpla.DOM.showNotice(noticeID,"notice",el,el.data("notice"))},simpla.form.validate=function(form,e,options){var defaults={scrollToInvalid:!0,scrollCorrection:0,showNotice:!0,stopOnInvalid:!0,callback:$.noop},countInvalid=0;return form[0].firstInvalidField=null,"Object"===simpla.helpers.getClass(options)&&simpla.helpers.extend(options,defaults),form.find(":input").each(function(){var pattern,isChecked,val,type,noticeID,self;switch(type=this.type,val=$(this).val(),self=$(this),noticeID="notice-"+self.data("noticeid"),type){case"text":case"password":case"textarea":case"number":case"tel":case"email":if(pattern=$(this).data("pattern"))switch(pattern){case"string":if(val.length)simpla.form.setValid(self,defaults.showNotice,noticeID),form[0].firstInvalidField=null,defaults.callback();else if(form[0].firstInvalidField||(form[0].firstInvalidField=self),simpla.form.setInvalid(self,e,noticeID,form[0].firstInvalidField,defaults),countInvalid+=1,defaults.callback(),defaults.stopOnInvalid)return!1;break;case"email":if(simpla.form.isEmail(val))simpla.form.setValid(self,defaults.showNotice,noticeID),form[0].firstInvalidField=null,defaults.callback();else if(form[0].firstInvalidField||(form[0].firstInvalidField=self),simpla.form.setInvalid(self,e,noticeID,form[0].firstInvalidField,defaults),countInvalid+=1,defaults.callback(),defaults.stopOnInvalid)return!1;break;default:if(simpla.form.isPattern(pattern,val))simpla.form.setValid(self,defaults.showNotice,noticeID),form[0].firstInvalidField=null,defaults.callback();else if(form[0].firstInvalidField||(form[0].firstInvalidField=self),simpla.form.setInvalid(self,e,noticeID,form[0].firstInvalidField,defaults),countInvalid+=1,defaults.callback(),defaults.stopOnInvalid)return!1}break;case"radio":case"checkbox":if(isChecked=$(this).data("f"),"boolean"==typeof isChecked)if(self.prop("checked")===isChecked)simpla.form.setValid(self),form[0].firstInvalidField=null,defaults.callback();else if(form[0].firstInvalidField||(form[0].firstInvalidField=self),simpla.form.setInvalid(self,e,noticeID,form[0].firstInvalidField,defaults),countInvalid+=1,defaults.callback(),defaults.stopOnInvalid)return!1}}),result},simpla.DOM={},simpla.DOM.scrollBody=function(target,correction,options){$("html, body").animate({scrollTop:target.offset().top-(correction||0)},options||{})},simpla.DOM.hideAllNotices=function(){$(".js-notice").remove()},simpla.DOM.hideNotice=function(notice){notice.remove()},simpla.DOM.showNotice=function(id,className,target,text){var notice=$("<div/>");target.length&&!$("#"+id).length&&(notice.attr("id",id),notice.text(text).addClass("js-notice "+className).appendTo(target.parent()),setTimeout(function(){notice.addClass("js-notice--active")},4))},simpla.DOM.hasClass=function(el,className){return simpla.helpers.inArray(el.className?el.className.split(" "):[],className)},simpla.DOM.getMaxHeight=function(blocks){var maxHeight=$(blocks[0]).outerHeight();return blocks.each(function(){$(this).outerHeight()>maxHeight&&(maxHeight=$(this).outerHeight())}),maxHeight},simpla.DOM.getScrollbarWidth=function(){var scrollbarWidth;return function(){var div;return scrollbarWidth?scrollbarWidth:(div=document.createElement("div"),div.style.width="100px",div.style.height="100px",div.style.overflow="scroll",div.style.visibility="hidden",document.body.appendChild(div),scrollWidth=div.offsetWidth-div.clientWidth,document.body.removeChild(div),scrollWidth)}}(),simpla.modules={},simpla.namespace=function(nsString){var parts=nsString.split("."),parent=simpla;return"simpla"===parts[0]&&(parts=parts.slice(1)),parts.forEach(function(item,i){parts[i]in parent||(parent[parts[i]]={}),parent=parent[parts[i]]}),parent},simpla.addMethod=function(namespace,func){var parts=namespace.split("."),parent=simpla;return"simpla"===parts[0]&&(parts=parts.slice(1)),parts.forEach(function(item,i){parts[i]in parent||i===parts.length-1?parts[i]in parent||i!==parts.length-1||(parent[parts[i]]=func):parent[parts[i]]={},parent=parent[parts[i]]}),parent},simpla});